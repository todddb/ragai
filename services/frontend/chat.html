<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI RAG Assistant</title>
  <script>
    if (localStorage.getItem('SIDEBAR_COLLAPSED') === 'true') {
      document.documentElement.classList.add('sidebar-collapsed');
    }
  </script>
  <link rel="stylesheet" href="css/style.css?v=__ASSET_VERSION__" />
  <!-- dayjs for relative timestamps -->
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/relativeTime.js"></script>
  <script>
    dayjs.extend(dayjs_plugin_relativeTime);
  </script>
</head>
<body class="page-chat">
  <header>
    <div class="header-left">
      <div class="logo-circle">AI</div>
    </div>
    <div class="header-center">
      <h1>AI RAG Assistant</h1>
      <p>Ask questions about your knowledge base and documents.</p>
    </div>
    <div class="header-actions">
      <button class="icon-btn nav-icon active" onclick="location.href='chat.html'" aria-label="Chat">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6.5 4h11a3.5 3.5 0 0 1 3.5 3.5v5A3.5 3.5 0 0 1 17.5 16H13l-4.4 3.8a1 1 0 0 1-1.6-.8V16H6.5A3.5 3.5 0 0 1 3 12.5v-5A3.5 3.5 0 0 1 6.5 4zm0 2A1.5 1.5 0 0 0 5 7.5v5A1.5 1.5 0 0 0 6.5 14H8a1 1 0 0 1 1 1v1.4l3-2.6a1 1 0 0 1 .6-.2h4.9a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 17.5 6h-11z" />
        </svg>
      </button>
      <button class="icon-btn nav-icon" onclick="location.href='settings.html'" aria-label="Settings">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 8.6a3.4 3.4 0 1 1 0 6.8 3.4 3.4 0 0 1 0-6.8zm8.2 2.8a7.7 7.7 0 0 0-.1-1l2-1.5-2-3.4-2.4 1a7.8 7.8 0 0 0-1.7-1l-.3-2.6h-4l-.3 2.6a7.8 7.8 0 0 0-1.7 1l-2.4-1-2 3.4 2 1.5a7.7 7.7 0 0 0 0 2.1l-2 1.5 2 3.4 2.4-1a7.8 7.8 0 0 0 1.7 1l.3 2.6h4l.3-2.6a7.8 7.8 0 0 0 1.7-1l2.4 1 2-3.4-2-1.5c.1-.3.1-.7.1-1.1z" />
        </svg>
      </button>
    </div>
  </header>

  <main class="chat-layout">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-title">
          <span class="sidebar-title-text">Conversations</span>
        </div>
        <div class="sidebar-controls">
          <button class="icon-btn sidebar-collapsed-toggle" id="sidebarCollapsedToggle" aria-label="Expand conversations sidebar">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7 3h10a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3h-4.5l-3.2 3.2a1 1 0 0 1-1.7-.7V16H7a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3zm0 2a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h2.6a1 1 0 0 1 1 1v1.6l1.8-1.8a1 1 0 0 1 .7-.3H17a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H7zm9.5 6.5a1 1 0 0 1 0 2h-6a1 1 0 0 1 0-2h6z"/>
            </svg>
          </button>
          <button class="icon-btn" id="sidebarToggle" aria-label="Collapse conversations sidebar">❮</button>
          <button class="btn btn-primary btn-small" id="sidebarNew">+ New</button>
        </div>
      </div>
      <div class="conversation-list sidebar-list" id="conversationList"></div>
      <div class="sidebar-resize-handle" id="sidebarResizeHandle" aria-hidden="true"></div>
    </aside>

    <section class="chat-main">
      <div class="chat-status status-text" id="chatStatus"></div>
      <div class="chat-container" id="chatContainer"></div>
      <div class="chat-composer">
        <div class="input-area">
          <textarea id="messageInput" rows="3" placeholder="Ask a question about your knowledge base..."></textarea>
          <button class="btn btn-primary" id="sendButton">Send</button>
        </div>
      </div>
    </section>
  </main>

  <div class="footer">
    <span>© 2026 AI RAG Assistant</span>
    <span class="build-version">v__ASSET_VERSION__</span>
  </div>

  <script>
    window.API_URL = window.API_URL || localStorage.getItem('API_URL');
  </script>
  <script src="js/config.js?v=__ASSET_VERSION__"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="js/chat.js?v=__ASSET_VERSION__"></script>
  <script src="js/sidebar.js?v=__ASSET_VERSION__"></script>
</body>
</html>
